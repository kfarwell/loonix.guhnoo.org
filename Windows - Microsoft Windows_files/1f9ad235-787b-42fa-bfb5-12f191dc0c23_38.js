if(typeof Wol==="undefined")Wol={};if(typeof Wol.CP==="undefined")Wol.CP={};if(typeof Wol.CP.AtlasFrame==="undefined")Wol.CP.AtlasFrame={};(function(){if(typeof Wol.CP.AtlasFrame.atlasFrameScriptLoaded==="undefined"||Wol.CP.AtlasFrame.atlasFrameScriptLoaded!==true){Wol.CP.AtlasFrame.atlasFrameScriptLoaded=true;Wol.CP.AtlasFrame.atlasFrameTargetRoot="http://view.atdmt.com/iaction/";Wol.CP.AtlasFrame.activeAtlasFrameCount=0;Wol.CP.AtlasFrame.atlasFrameWaitTime=150;Wol.CP.AtlasFrame.$atlasFrame=$("<iframe class='atlasFrame' src='about:blank'></iframe>");Wol.CP.AtlasFrame.silverlightVideoActionList={};Wol.CP.AtlasFrame.silverlightVideoActionMap={playing:"play",paused:"pause",stopped:"ended"};Wol.CP.AtlasFrame.isAtlasFrameReady=true;Wol.CP.AtlasFrame.atlasFrameUpdateRetryMax=2;window.onPlayerReady=function(a){if(typeof a!=="undefined"){var b=a.Name;if(typeof b!=="undefined"&&b!==""){var e=$("object[data-script-id='"+b+"']");if(typeof e!=="undefined"){var d=e.parents("div.VideoContainer").first().parent().find("span.atlasAction").first();if(typeof d!=="undefined"){var c=$.parseJSON(d.attr("data-action-type-pairs"));Wol.CP.AtlasFrame.ConvertEventNamesToLowerCase(c);if(typeof c!=="undefined")Wol.CP.AtlasFrame.silverlightVideoActionList[b]=c;a.addEventListener("PlayStateChanged",Wol.CP.AtlasFrame.LogSilverlightPlayerAction.bind(a));a.addEventListener("MediaEnded",Wol.CP.AtlasFrame.LogSilverlightPlayerAction.bind(a))}}}}};$(document).ready(function(){$("iframe.atlasFrame").each(function(){$(this).remove()});$(document.body).prepend(Wol.CP.AtlasFrame.$atlasFrame);$("div.AtlasFramePageLoadAction pre").each(function(){typeof $(this).text!=="undefined"&&$(this).text!==""&&Wol.CP.AtlasFrame.SetAtlasFrameSrc($(this).text())});$("span.atlasAction").each(function(){if($(this).parents("div.atlasFrameEnabledDropDown").length>0||$(this).parents("div.atlasFrameEnabledCheckbox").length>0)return;var b=$.parseJSON($(this).attr("data-action-type-pairs"));for(actionType in b){var a=b[actionType];actionType!==""&&typeof a!=="undefined"&&a!==""&&Wol.CP.AtlasFrame.AttachHandler($(this),actionType.toLowerCase(),a)}});$("div.atlasFrameEnabledDropDown a.dropdown_button").each(function(){Wol.CP.AtlasFrame.AttachDropDownLinkHandler($(this))});$(window).load(function(){$("div.atlasFrameEnabledCheckbox").each(function(){Wol.CP.AtlasFrame.AttachCheckboxLinkHandler($(this))})})});Wol.CP.AtlasFrame.$atlasFrame.load(function(){Wol.CP.AtlasFrame.isAtlasFrameReady=true});Wol.CP.AtlasFrame.LogSilverlightPlayerAction=function(c,a){if(typeof c!=="undefined"&&c!==null&&typeof a!=="undefined"&&a!==null)if(typeof a.Result!=="undefined"&&a.Result!==""){var d=Wol.CP.AtlasFrame.silverlightVideoActionMap[a.Result.toLowerCase()];if(typeof d!=="undefined"){var b=Wol.CP.AtlasFrame.silverlightVideoActionList[c.Name];if(b!==null&&typeof b!=="undefined"){var e=b[d];typeof e!=="undefined"&&Wol.CP.AtlasFrame.SetAtlasFrameSrc(e)}}}};Wol.CP.AtlasFrame.AttachHandler=function(b,a,c){b.parent(".caption").parent().find("video").first().on(a,function(){Wol.CP.AtlasFrame.SetAtlasFrameSrc(c)});b.parent("a.navigationLink").on(a,function(a){Wol.CP.AtlasFrame.SetAtlasFrameSrc(c,a)});b.parents("div.atlasFrameEnabled").first().find("a").on(a,function(a){Wol.CP.AtlasFrame.SetAtlasFrameSrc(c,a)})};Wol.CP.AtlasFrame.ConvertEventNamesToLowerCase=function(a){if(a!==null&&typeof a!=="undefined")for(eventName in a){var b=eventName.toLowerCase();if(eventName!==b){a[b]=a[eventName];delete a[eventName]}}};Wol.CP.AtlasFrame.AttachDropDownLinkHandler=function(a){var b=a.parents("div.atlasFrameEnabledDropDown").first().children("div.dropdownAtlasTagMap").first().children();a.click(function(g){if($(this).hasClass("dropdown_button_disabled")===false){var d=$(this).parents("div.section_section-list-dropdown_script").children("ul.dropdown_list").children("[data-value!='']"),f=d.parent().find("li[data-value!=''][class~='dropdown_item_focused_and_selected']").first(),c=d.index(f);if(c>-1){var e=$.parseJSON($(b[c]).find("span.atlasAction").attr("data-action-type-pairs"));Wol.CP.AtlasFrame.ConvertEventNamesToLowerCase(e);var a=e.click;typeof a!=="undefined"&&a!==""&&Wol.CP.AtlasFrame.SetAtlasFrameSrc(a,g)}}})};Wol.CP.AtlasFrame.AttachCheckboxLinkHandler=function(c){var b=c.find("div.atlasFrameEnabled").find("span.atlasAction");if(b.length===2){var e=c.find("#wol_dlBtn").first(),d=c.find("#wol_chkBox").first();if(e.length>0&&d.length>0);var a="";e.click(function(e){switch(d.prop("checked")){case false:a=$.parseJSON($(b[0]).attr("data-action-type-pairs"));break;case true:a=$.parseJSON($(b[1]).attr("data-action-type-pairs"))}if(a!==""){Wol.CP.AtlasFrame.ConvertEventNamesToLowerCase(a);var c=a.click;typeof c!=="undefined"&&c!==""&&Wol.CP.AtlasFrame.SetAtlasFrameSrc(c,e)}})}};Wol.CP.AtlasFrame.SetAtlasFrameSrc=function(c,a){var b=false;if(Wol.CP.AtlasFrame.GetEventElementType(a)==="a"){b=true;a.preventDefault()}if(b===true&&a.currentTarget!==""){Wol.CP.AtlasFrame.isAtlasFrameReady=false;Wol.CP.AtlasFrame.$atlasFrame.attr("src",Wol.CP.AtlasFrame.atlasFrameTargetRoot+c);window.setTimeout(function(){Wol.CP.AtlasFrame.$atlasFrame.attr("src","about:blank");window.setTimeout(function(){window.location.href=a.currentTarget},Wol.CP.AtlasFrame.atlasFrameWaitTime)},Wol.CP.AtlasFrame.atlasFrameWaitTime)}else Wol.CP.AtlasFrame.TryUpdateFrameSource(c,1)};Wol.CP.AtlasFrame.GetEventElementType=function(a){if(a!==null&&typeof a!=="undefined"&&typeof a.currentTarget!=="undefined"&&typeof a.currentTarget.tagName!=="undefined")return a.currentTarget.tagName.toLowerCase();else return ""};Wol.CP.AtlasFrame.TryUpdateFrameSource=function(b,a){if(Wol.CP.AtlasFrame.isAtlasFrameReady===true){Wol.CP.AtlasFrame.isAtlasFrameReady=false;Wol.CP.AtlasFrame.$atlasFrame.attr("src",Wol.CP.AtlasFrame.atlasFrameTargetRoot+b);window.setTimeout(function(){Wol.CP.AtlasFrame.$atlasFrame.attr("src","about:blank")},Wol.CP.AtlasFrame.atlasFrameWaitTime)}else if(a<=Wol.CP.AtlasFrame.atlasFrameUpdateRetryMax)window.setTimeout(function(){Wol.CP.AtlasFrame.TryUpdateFrameSource(b,a+1)},Wol.CP.AtlasFrame.atlasFrameWaitTime);else Wol.CP.AtlasFrame.isAtlasFrameReady=true}}})()